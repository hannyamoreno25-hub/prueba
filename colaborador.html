<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMINISTRACIN - MUEVETE EN BICI</title>
    <link rel="stylesheet" href="estilos.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>

<body>

    <header>
        <nav>
            <div id="barranav">
                <ul id="menu">
                    <li><a href="index.html">INICIO</a></li>
                    <li><a href="#">MI PUNTO</a></li>
                    <li><a href="#">COLABORADOR</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main id="layout-principal">

        <div class="columna-formularios">
            
            <section id="zona-foto">
                <h2>Perfil del Monitor</h2>
                <div id="recuadro-foto" style="text-align: center; align-items: center;">
                    <img src="https://via.placeholder.com/150" alt="Foto Empleado" style="border-radius: 50%; width: 150px; border: 3px solid #a00; margin-bottom: 15px;">
                    
                    <h3 style="color: #a00;">Juan P茅rez</h3>
                    <p><strong>ID:</strong> MUB-2024-88</p>
                    <p><strong>Puesto:</strong> Monitor de Ruta</p>
                    
                    <div style="width: 100%; margin-top: 20px;">
                        <label>Progreso Mensual</label>
                        <div class="progress" style="height: 25px;">
                            <div class="progress-bar bg-danger" role="progressbar" style="width: 75%;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">75%</div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="Ley-silla">
                <h2>Resumen de Jornada</h2>
                <div id="Foto-descanso">
                    
                    <div style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
                        
                        <div style="background:#eee; padding: 15px; border-radius: 10px; width: 45%; text-align: center;">
                            <h4>Llegada</h4>
                            <h2 style="color: green;" id="valHoraLlegada">07:58 AM</h2>
                        </div>

                        <div style="background:#eee; padding: 15px; border-radius: 10px; width: 45%; text-align: center;">
                            <h4>Faltas Mes</h4>
                            <h2 style="color: #a00;" id="valFaltas">1</h2>
                        </div>

                        <div style="background:#eee; padding: 15px; border-radius: 10px; width: 95%; text-align: center; margin-top: 10px;">
                            <h4>Tiempo Laborado Hoy</h4>
                            <h2 style="color: #333;" id="valTiempoTrabajado">00:00:00</h2>
                        </div>
                    </div>

                    <p style="text-align: center; margin-top: 20px;">Estado actual: <strong>EN TURNO</strong></p>
                    <button>DESCARGAR REPORTE</button>
                </div>
            </section>

        </div>


        <div class="columna-carrusel">
            
            <section id="carrucelseccion" style="background-color: #fff; border: 3px solid rgb(139, 2, 4); color: #333; cursor: default;">
                <h2 style="color: rgb(139, 2, 4); text-align: center; margin-bottom: 20px;">Detalle de Tiempos</h2>
                
                <h5 style="background: rgb(139, 2, 4); color: white; padding: 5px;"> Sanitario (Total: <span id="totalTiempoBano">00:15:00</span>)</h5>
                <table class="table table-striped" id="tablaSanitario" style="font-size: 0.9rem;">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Inicio</th>
                            <th>Fin</th>
                            <th>Tiempo</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>1</td><td>09:00</td><td>09:05</td><td>5 min</td></tr>
                        <tr><td>2</td><td>11:30</td><td>11:40</td><td>10 min</td></tr>
                    </tbody>
                </table>

                <h5 style="background: rgb(139, 2, 4); color: white; padding: 5px; margin-top: 20px;"> Ley Silla (Tomados: <span id="contadorDescansos">2/3</span>)</h5>
                <ul class="list-group" id="listaDescansos">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        Descanso 1 - 10:00 AM
                        <span class="badge bg-danger rounded-pill">5 min</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        Descanso 2 - 12:30 PM
                        <span class="badge bg-danger rounded-pill">5 min</span>
                    </li>
                </ul>

            </section>
<div id="panelDashboard">
  <h3>Registros de Actividad</h3>
  <table border="1" style="width:100%; border-collapse: collapse;">
    <thead>
      <tr>
        <th>Hora</th>
        <th>Fecha</th>
        <th>Ubicaci贸n / Link</th>
        <th>Nombre / Estado</th>
      </tr>
    </thead>
    <tbody id="tablaCuerpo">
      </tbody>
  </table>
</div>
        </div>

    </main> 
    <script src="script_admin.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
  function loginUsuario() {
    // ... c贸digo previo del formulario ...

    google.script.run
      .withSuccessHandler(function(respuesta) {
        
        if (respuesta.resultado === "exito") {
          
          if (respuesta.rol === "admin") {
            // 1. Ocultas el login
            document.getElementById("loginForm").style.display = "none";
            // 2. Muestras el panel de admin
            document.getElementById("panelAdmin").style.display = "block";
            
            // ---> AQU PONES LA 3 <---
            // Esta l铆nea hace que la tabla se llene apenas entras
            cargarDashboard(); 
            // -------------------------

            alert("Bienvenido Administrador");

          } else {
            // L贸gica para usuario normal...
            document.getElementById("loginForm").style.display = "none";
            document.getElementById("panelUsuario").style.display = "block";
          }

        } else {
          alert("Usuario o contrase帽a incorrectos");
        }
      })
      .validarUsuario(/* ... */); 
  }

  // Aqu铆 abajo debes tener las otras funciones nuevas:
  function cargarDashboard() {
     // ... c贸digo que te di en el paso 2 ...
  }

  function mostrarDatosEnTabla(datos) {
     // ... c贸digo que te di en el paso 2 ...
  }
</script>
</body>

</html>